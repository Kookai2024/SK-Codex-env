# 2025-09-25 Mid-Check Report

> 기준 문서: [`team-todo-kickoff_v2_250920.md`](../../team-todo-kickoff_v2_250920.md)
> 참고 가이드: [`codex-kickoff.md`](../../codex-kickoff.md)

## 1. 진행 현황 요약
| 구분 | 상태 | 근거 | 후속 조치 |
| --- | --- | --- | --- |
| Step 1. PocketBase DB 설계 & Seed | 진행 중 | `packages/server/pb/collections.json`에 컬렉션 정의 존재, `packages/server/scripts/seed.js`로 샘플 데이터 생성 가능. | PocketBase 서버에 실제 반영 및 자동화 테스트 필요. Seed 실행 로그 수집 필요. |
| Step 2. 출퇴근 로직 & 팝업 UI | 진행 중 | 루트 `attendance/` 모듈에 REST 서비스/Express 라우터/React 컴포넌트 초안 추가. | PocketBase와 실제 연동, Next.js 페이지 결합, 권한 미들웨어 확장 필요. |
| Step 3. 캘린더 근태 연동 | 진행 중 | `leave_schedules` 컬렉션과 월간 캘린더 API/테스트 초안 작성. | Next.js 캘린더 UI와 PocketBase 연동 검증 필요. |
| Step 4. Todo 칸반 & 편집 잠금 | 진행 중 | `todos` 모듈에 편집 잠금 서비스/라우터/테스트 초안 추가. | Next.js 페이지 설계 + PocketBase 연동 검증 필요. |
| Step 5. 대시보드 권한 뷰 | 진행 중 | 역할별 대시보드 개요 REST API와 테스트가 추가됨. | Next.js 대시보드 UI와 PocketBase 연동 검증 필요. |
| Step 6. 주간 보고서 자동화 | 진행 중 | `packages/server/scripts/weekly-report.js` 초안 및 `npm test`로 실행 검증 가능. | PocketBase 실데이터 연동, Obsidian 업로드/파일 관리, CSV/XLSX/MD 동시 생성 마무리. |
| Step 7. 알림 연동 | 미착수 | 이메일/메신저 연동 코드 없음. | Slack/Email 웹훅 조사 및 토글 설정 설계. |
| Step 8. 문서화 | 진행 중 | README, HOW_TO_EDIT, 중간점검 문서 갱신. API 문서 및 UI 가이드 미작성. | API 스펙 문서와 컴포넌트 카탈로그 작성 필요. |

## 2. 세부 점검
### 2.1 데이터 모델 & 시드
- PocketBase 컬렉션 정의: `users`, `projects`, `project_members`, `todos`, `attendance`, `weekly_reports`, `audit_logs` 등 필드와 인덱스가 준비됨.
- 시드 스크립트(`seed.js`)가 5명 사용자, 10개 프로젝트, 샘플 출석/할일 데이터를 생성하도록 작성됨.
- 아직 CI나 자동 검증 파이프라인이 없어 수동 실행에 의존.

### 2.2 자동 보고서 스크립트
- `weekly-report.js`에서 CSV/XLSX 생성 및 PocketBase 목업 모드 지원.
- `tests/weekly-report-week-range.test.js`가 현재 주차 파일명이 생성되는지 검증.
- 향후 개선 사항: 보고서 저장 경로 환경 변수화, Obsidian 업로드 옵션 구현, 요약 텍스트 생성 로직 추가.

### 2.3 프런트엔드 & UI
- Next.js 프로젝트는 아직 없지만 `attendance/ui/AttendancePunchCard.tsx`로 출퇴근 버튼 UI 초안이 추가됨.
- 공통 컴포넌트/레이아웃, RBAC 라우팅, 칸반 UI 등 핵심 요소는 여전히 미구현 상태로 후속 작업 필요.

### 2.4 보안 & 권한
- PocketBase 컬렉션 수준에서 기본 RBAC 규칙이 일부 설정되어 있으나, 클라이언트/서버 로직 차원의 검증은 필요.
- 비밀번호 저장/암호화, 편집 잠금 서버 타임스탬프 처리 로직 구현 필요.
- Todo 편집 잠금 서비스가 서버 시각 기준 09시 이후 member 편집을 차단하고 admin 예외를 허용하도록 동작.
- 대시보드 개요 서비스/라우터가 admin/member/guest 권한을 분리하고 게스트 접근을 서버에서 차단하도록 테스트로 검증됨.

## 3. 주요 리스크 & 대응
| 리스크 | 영향 | 대응 전략 |
| --- | --- | --- |
| PocketBase 연동 미검증 | Seed/보고서 스크립트가 실제 데이터와 불일치할 수 있음 | 로컬 PocketBase 서버를 세팅해 자동 테스트를 추가하고, `npm run seed` 및 `npm test` CI 구성 |
| 프런트엔드 착수 지연 | 출퇴근/칸반/대시보드 UI 구축 일정 지연 | Next.js 프로젝트 초기화 및 공통 UI 컴포넌트 정의를 우선순위로 진행 |
| 편집 잠금 규칙 미구현 | RBAC 요구사항 충족 실패 | 서버 측 편집 잠금 검증 로직 및 테스트 설계 |

## 4. 다음 액션 아이템
1. PocketBase 로컬 환경에서 Seed/보고서 스크립트를 실행해 실제 데이터 확인.
2. 출퇴근 REST 서비스와 PocketBase API를 연동하고 인증 토큰/권한 체크 미들웨어를 설계.
3. Next.js 기반 프런트엔드 초기 세팅 및 `AttendancePunchCard` 컴포넌트를 실사용 페이지에 통합.
4. 보고서 스크립트에 Obsidian 연동 옵션 및 요약 로직 추가 계획 수립.
5. RBAC/편집 잠금 로직에 대한 단위 테스트 시나리오 초안 작성.
6. 새 대시보드 개요 API를 Next.js 레이아웃과 연동하고 PocketBase 실제 데이터를 검증.

## 5. 참고 로그
- README & HOW_TO_EDIT 문서 갱신: 프로젝트 구조/테스트 방법/체크리스트 정리.
- 기능별 폴더 뼈대 생성: `auth/`, `todos/`, `projects/`, `dashboard/`, `reports/`.
- `attendance/` 모듈 신설: 서비스 로직, Express 라우터, React UI, 단위 테스트 추가.

> 본 문서는 다음 체크포인트에서 최신화하며, 진행 상황과 블로커를 공유하는 기준 자료로 활용합니다.
